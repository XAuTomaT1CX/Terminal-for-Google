<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="/styles/option.css">
	<script src="/scripts/option.js"></script>
</head>
<body>
	<h1>Security</h1>
	<ul>
		<li><input id="secure-box" type="checkbox" />
		<label for="secure-box">use SSL (https://ã€œ)</label>
		<span class="msg">saved</span>
	</ul>

	<h1>Apperance</h1>
	<ul>
		<li><input id="icon-only-box" type="checkbox" />
		<label for="icon-only-box">show icon only</label>
		<span class="msg">saved</span>

		<li><label for="columns-box">columns</label>
		<select id="columns-box">
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5</option>
		</select>
		<span class="msg">saved</span>
	</ul>

	<script type="text/javascript">
		var backgroundPage = chrome.extension.getBackgroundPage();
		var pref = backgroundPage.pref;


		var secureBox = Q('#secure-box');
		secureBox.checked = pref.get('secure');
		secureBox.addEventListener('change', function(){
			pref.set('secure', secureBox.checked);
			onSaved(this);
		}, false);


		var iconOnlyBox = Q('#icon-only-box')
		iconOnlyBox.checked = pref.get('icon-only');
		iconOnlyBox.addEventListener('change', function(){
			pref.set('icon-only', iconOnlyBox.checked);
			onSaved(this);
		}, false);


		var columnsBox = Q('#columns-box');
		columnsBox.value = pref.get('columns');
		columnsBox.addEventListener('change', function(){
			pref.set('columns', columnsBox.value);
			onSaved(this);
		}, false);


		window.addEventListener('pref-changed', function(event){
			var key = event.key, value = event.value;

			if(key === 'secure' && secureBox.checked !== value){
				secureBox.checked = event.value;
			}else if(key === 'icon-only' && iconOnlyBox.checked !== value){
				iconOnlyBox.checked = event.value;
			}else if(key === 'columns' && columnsBox.value != value){
				columnsBox.value = event.value;
			}
		});
	</script>
</body>
</html>

